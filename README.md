# Интеллектуальный помощник оператора службы поддержки RUTUBE

## Описание

Реализация кейса на Всероссийском хакатоне "Цифровой прорыв" от команды FlashTeam.

Решение представляет собой RAG-систему, постороенную на основе базы знаний операторов службы поддержки RUTUBE и большой языковой модели (T-Lite-instruct-01), которая обрабатывает результаты поиска и генерирует релевантный и удобный для оператора ответ.

Решение представлено в виде API а также, Telegram-бота для удобного взаимодействия с системой.

## Структура проекта

- **app.py**: Основной файл приложения FastAPI. Содержит логику обработки запросов, генерацию ответов с использованием языковой модели и взаимодействие с базой данных PostgreSQL.
- **bot.py**: Файл с кодом Telegram бота, который интегрируется с API. Бот принимает сообщения от пользователей и отправляет их на API для получения ответов.
- **create_tables.py**: Скрипт для создания таблиц в базе данных PostgreSQL. Содержит код для создания таблиц, предназначенных для хранения вопросов, ответов, классификаций, векторов.
- **search_func.py**: Демонстрационный вариант работы поисковой системы (без LLM).

## Установка и запуск

### Предварительные требования

- Python 3.8+
- PostgreSQL + расширение pgvector для векторного поиска
- Установленные зависимости из `requirements.txt`
- 
### Настройка конфигурации

Перед запуском проекта убедитесь, что у вас настроены данные для подключения к базе данных и токен вашего Telegram-бота.

1. **Настройка подключения к базе данных**:
   - В файлах, где используется подключение к базе данных, необходимо изменить строку подключения на вашу. Пример строки подключения:
     ```python
     conn = psycopg2.connect("dbname='test' user='postgres' host='localhost' password='test'")
     ```
   - Замените `dbname`, `user`, `host`, и `password` на ваши актуальные данные для подключения к PostgreSQL.

2. **Настройка токена Telegram-бота**:
   - В файле `bot.py` замените `YOUR_TELEGRAM_BOT_TOKEN` на токен вашего бота, который можно получить у [BotFather](https://t.me/BotFather) в Telegram:
     ```python
     TELEGRAM_BOT_TOKEN = "YOUR_TELEGRAM_BOT_TOKEN"  # Замените на ваш токен бота
     ```
### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Документация к API
Документация OpenAPI доступна в файле [`openapi.yaml`](./openapi.yaml). Для просмотра можно использовать инструменты Swagger.

### Telegram-бот
Демонстрационный вариант Telegram-бота доступен по адресу: https://t.me/flashteam_rutube_bot
